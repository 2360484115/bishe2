# bishe2
毕业设计
graph LR
    A[开始] --> B[读取角速度传感器数据 omega_x, omega_y, omega_z]
    B --> C[计算旋转矩阵 A_k]
    C --> D[预测系统状态]
    D --> E[计算噪声协方差矩阵]
    E --> F[修正阶段 1]
    F --> G[计算雅可比矩阵 H_k1]
    G --> H[计算卡尔曼增益 K_k1]
    H --> I[读取加速度计数据 z_k1]
    I --> J[计算观测函数 h_1]
    J --> K[计算校正因子 q_1]
    K --> L[修正后验状态]
    L --> M[更新误差协方差矩阵 P_k1]
    M --> N[修正阶段 2]
    N --> O[计算雅可比矩阵 H_k2]
    O --> P[计算卡尔曼增益 K_k2]
    P --> Q[读取磁力计数据 z_k2]
    Q --> R[计算观测函数 h_2]
    R --> S[计算校正因子 q_2]
    S --> T[修正最终后验状态]
    T --> U[更新最终误差协方差矩阵 P_k]
    U --> V[结束]
